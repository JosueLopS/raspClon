"use strict";

const gpio = require("../gpio");

const SENSOR_PIN = 21;

console.log("*** sensor example sync***");
console.log("sensors are connected to pin", SENSOR_PIN);

// init pins 
gpio.init_gpio(SENSOR_PIN, gpio.GPIO_MODE_SENSOR, 0);

if (!gpio.init_sensor(SENSOR_PIN, gpio.RES_SENSOR_11))
    console.log("init: error or no sensors connected");
else if (!gpio.scan_sensor_sync(SENSOR_PIN))
    console.log("scan: error or no sensors connected");
else {
    console.log("sensor count:", gpio.get_sensor_count(SENSOR_PIN));
    
    var sensor_list = gpio.list_sensor(SENSOR_PIN);
    var sensor_data = gpio.read_sensor_sync(SENSOR_PIN, false);

    if ((sensor_data !== undefined) && (sensor_list !== undefined))
        for(var i=0; i < sensor_data.length; i++)
            console.log(sensor_list[i], sensor_data[i], "Â°C");
    else
        console.log("list + read: error or no sensors connected");
}
