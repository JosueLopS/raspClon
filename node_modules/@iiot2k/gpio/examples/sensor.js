"use strict";

const gpio = require("../gpio");

const SENSOR_PIN = 21;

console.log("*** sensor example ***");
console.log("sensors are connected to pin", SENSOR_PIN);

// init pins 
gpio.init_gpio(SENSOR_PIN, gpio.GPIO_MODE_SENSOR, 0);
    
if (!gpio.init_sensor(SENSOR_PIN, gpio.RES_SENSOR_12))
    console.log("init: error or no sensors connected");
else
    gpio.scan_sensor(SENSOR_PIN, (ret) => {
        if (!ret)
            console.log("scan: error or no sensors connected");
        else {
            console.log("sensor count:", gpio.get_sensor_count(SENSOR_PIN));

            var sensor_list = gpio.list_sensor(SENSOR_PIN);

            if (sensor_list === undefined)
                console.log("list: error or no sensors connected");
            else
                gpio.read_sensor(SENSOR_PIN, false, (sensor_data) => {
                    if (sensor_data === undefined)
                        console.log("read: error or no sensors connected");
                    else
                        for(var i=0; i < sensor_data.length; i++)
                            console.log(sensor_list[i], sensor_data[i], "Â°C");
                });
        }
    });
